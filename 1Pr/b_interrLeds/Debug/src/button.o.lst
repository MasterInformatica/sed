   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"button.c"
  21              	.Ltext0:
  22              		.file 1 "../src/button.c"
 1952              		.align	2
 1955              	symbol:
 1956 0000 00000000 		.space	4
 1957              		.text
 1958              		.align	2
 1959              		.global	Eint4567_init
 1961              	Eint4567_init:
 1962              	.LFB0:
   1:../src/button.c **** /*--- ficheros de cabecera ---*/
   2:../src/button.c **** #include "44blib.h"
   3:../src/button.c **** #include "44b.h"
   4:../src/button.c **** #include "def.h"
   5:../src/button.c **** /*--- variables globales ---*/
   6:../src/button.c **** int symbol = 0;
   7:../src/button.c **** /*--- funciones externas ---*/
   8:../src/button.c **** //extern void D8Led_Symbol(int value);
   9:../src/button.c **** /*--- declaracion de funciones ---*/
  10:../src/button.c **** void Eint4567_ISR(void) __attribute__ ((interrupt ("IRQ")));
  11:../src/button.c **** void Eint4567_init(void);
  12:../src/button.c **** extern void leds_switch ();
  13:../src/button.c **** extern void D8Led_symbol(int value);
  14:../src/button.c **** /*
  15:../src/button.c **** .equ K_INTCON, 0x5
  16:../src/button.c **** .equ K_INTMOD, 0x0
  17:../src/button.c **** .equ K_INTMSK, 0x200000
  18:../src/button.c **** .equ K_EXTINTPND, 0x200000
  19:../src/button.c **** .equ K_EXTINT, 0x22222222
  20:../src/button.c **** .equ K_I_ISPC, 0x3FFFFFF
  21:../src/button.c ****  */
  22:../src/button.c **** /*--- codigo de funciones ---*/
  23:../src/button.c **** void Eint4567_init(void)
  24:../src/button.c **** {
 1963              		.loc 1 24 0
 1964              		.cfi_startproc
 1965              		@ Function supports interworking.
 1966              		@ args = 0, pretend = 0, frame = 0
 1967              		@ frame_needed = 1, uses_anonymous_args = 0
 1968 0000 0DC0A0E1 		mov	ip, sp
 1969              	.LCFI0:
 1970              		.cfi_def_cfa_register 12
 1971 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 1972 0008 04B04CE2 		sub	fp, ip, #4
 1973              		.cfi_offset 14, -8
 1974              		.cfi_offset 13, -12
 1975              		.cfi_offset 11, -16
 1976              	.LCFI1:
 1977              		.cfi_def_cfa 11, 4
  25:../src/button.c **** /* Configuracion del controlador de interrupciones */
  26:../src/button.c **** 	// Borra EXTINTPND escribiendo 1s en el propio registro
  27:../src/button.c **** 	rEXTINTPND = 0xFF;
 1978              		.loc 1 27 0
 1979 000c 90309FE5 		ldr	r3, .L2
 1980 0010 FF20A0E3 		mov	r2, #255
 1981 0014 002083E5 		str	r2, [r3, #0]
  28:../src/button.c **** 	// Borra INTPND escribiendo 1s en I_ISPC
  29:../src/button.c **** 	rI_ISPC =  0x3FFFFFF;
 1982              		.loc 1 29 0
 1983 0018 88309FE5 		ldr	r3, .L2+4
 1984 001c 3F23E0E3 		mvn	r2, #-67108864
 1985 0020 002083E5 		str	r2, [r3, #0]
  30:../src/button.c **** 	// Configura las lineas como de tipo IRQ mediante INTMOD
  31:../src/button.c **** 	rINTMOD = 0x0000000;
 1986              		.loc 1 31 0
 1987 0024 80309FE5 		ldr	r3, .L2+8
 1988 0028 0020A0E3 		mov	r2, #0
 1989 002c 002083E5 		str	r2, [r3, #0]
  32:../src/button.c **** 	// Habilita int. vectorizadas y la linea IRQ (FIQ no) mediante INTCON
  33:../src/button.c **** 	rINTCON = 0x1;
 1990              		.loc 1 33 0
 1991 0030 1E36A0E3 		mov	r3, #31457280
 1992 0034 0120A0E3 		mov	r2, #1
 1993 0038 002083E5 		str	r2, [r3, #0]
  34:../src/button.c **** 	// Enmascara todas las lineas excepto Eint4567 y el bit global (INTMSK)
  35:../src/button.c **** 	// BIT_GLOBAL | BIT_EINT4567
  36:../src/button.c **** 	rINTMSK = (~0x0) & (~ ( (1<<26) | (1<<21) ));
 1994              		.loc 1 36 0
 1995 003c 6C309FE5 		ldr	r3, .L2+12
 1996 0040 4226E0E3 		mvn	r2, #69206016
 1997 0044 002083E5 		str	r2, [r3, #0]
  37:../src/button.c **** 	// Establecer la rutina de servicio para Eint4567
  38:../src/button.c **** 	pISR_EINT4567 = (unsigned) Eint4567_ISR;
 1998              		.loc 1 38 0
 1999 0048 64309FE5 		ldr	r3, .L2+16
 2000 004c 64209FE5 		ldr	r2, .L2+20
 2001 0050 002083E5 		str	r2, [r3, #0]
  39:../src/button.c **** 
  40:../src/button.c **** /* Configuracion del puerto G */
  41:../src/button.c **** 	// Establece la funcion de los pines (EINT7-EINT0)
  42:../src/button.c **** 	rPCONG = rPCONG & (~0xC0); //6 y 7
 2002              		.loc 1 42 0
 2003 0054 60309FE5 		ldr	r3, .L2+24
 2004 0058 5C209FE5 		ldr	r2, .L2+24
 2005 005c 002092E5 		ldr	r2, [r2, #0]
 2006 0060 C020C2E3 		bic	r2, r2, #192
 2007 0064 002083E5 		str	r2, [r3, #0]
  43:../src/button.c **** 	// Habilita las resistencias de pull-up
  44:../src/button.c **** 	rPUPG = 0x0;
 2008              		.loc 1 44 0
 2009 0068 50309FE5 		ldr	r3, .L2+28
 2010 006c 0020A0E3 		mov	r2, #0
 2011 0070 002083E5 		str	r2, [r3, #0]
  45:../src/button.c **** 	// Configura las lineas de int. como de flanco de bajada mediante EXTINT
  46:../src/button.c **** 	rEXTINT =  0x22000000;//(rEXTINT & 0x88ffffff) |
 2012              		.loc 1 46 0
 2013 0074 48309FE5 		ldr	r3, .L2+32
 2014 0078 2224A0E3 		mov	r2, #570425344
 2015 007c 002083E5 		str	r2, [r3, #0]
  47:../src/button.c **** /* Por precaucion, se vuelven a borrar los bits de INTPND y EXTINTPND */
  48:../src/button.c **** 
  49:../src/button.c **** 	rI_ISPC =  0x3FFFFFF;
 2016              		.loc 1 49 0
 2017 0080 20309FE5 		ldr	r3, .L2+4
 2018 0084 3F23E0E3 		mvn	r2, #-67108864
 2019 0088 002083E5 		str	r2, [r3, #0]
  50:../src/button.c **** 	rEXTINTPND =  0xFF;
 2020              		.loc 1 50 0
 2021 008c 10309FE5 		ldr	r3, .L2
 2022 0090 FF20A0E3 		mov	r2, #255
 2023 0094 002083E5 		str	r2, [r3, #0]
  51:../src/button.c **** }
 2024              		.loc 1 51 0
 2025 0098 0CD04BE2 		sub	sp, fp, #12
 2026 009c 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2027 00a0 1EFF2FE1 		bx	lr
 2028              	.L3:
 2029              		.align	2
 2030              	.L2:
 2031 00a4 5400D201 		.word	30539860
 2032 00a8 2400E001 		.word	31457316
 2033 00ac 0800E001 		.word	31457288
 2034 00b0 0C00E001 		.word	31457292
 2035 00b4 74FF7F0C 		.word	209715060
 2036 00b8 00000000 		.word	Eint4567_ISR
 2037 00bc 4000D201 		.word	30539840
 2038 00c0 4800D201 		.word	30539848
 2039 00c4 5000D201 		.word	30539856
 2040              		.cfi_endproc
 2041              	.LFE0:
 2043              		.align	2
 2044              		.global	Eint4567_ISR
 2046              	Eint4567_ISR:
 2047              	.LFB1:
  52:../src/button.c **** 
  53:../src/button.c **** /*COMENTAR PARA LA PARTE DEL 8-SEGMENTOS
  54:../src/button.c **** DESCOMENTAR PARA LA PRIMERA PARTE CON INTERRUPCIONES
  55:../src/button.c **** */
  56:../src/button.c **** void Eint4567_ISR(void)
  57:../src/button.c **** {
 2048              		.loc 1 57 0
 2049              		.cfi_startproc
 2050              		@ Interrupt Service Routine.
 2051              		@ args = 0, pretend = 0, frame = 0
 2052              		@ frame_needed = 1, uses_anonymous_args = 0
 2053 00c8 04C02DE5 		str	ip, [sp, #-4]!
 2054 00cc 0DC0A0E1 		mov	ip, sp
 2055              	.LCFI2:
 2056              		.cfi_def_cfa_register 12
 2057 00d0 0FD82DE9 		stmfd	sp!, {r0, r1, r2, r3, fp, ip, lr, pc}
 2058 00d4 04B04CE2 		sub	fp, ip, #4
 2059              		.cfi_offset 14, -8
 2060              		.cfi_offset 13, -12
 2061              		.cfi_offset 11, -16
 2062              		.cfi_offset 3, -20
 2063              		.cfi_offset 2, -24
 2064              		.cfi_offset 1, -28
 2065              		.cfi_offset 0, -32
 2066              	.LCFI3:
 2067              		.cfi_def_cfa 11, 4
  58:../src/button.c **** 	//Conmutamos LEDs
  59:../src/button.c **** 	leds_switch();
 2068              		.loc 1 59 0
 2069 00d8 FEFFFFEB 		bl	leds_switch
  60:../src/button.c **** 	//Delay para eliminar rebotes
  61:../src/button.c **** 	DelayMs(5000);
 2070              		.loc 1 61 0
 2071 00dc 28009FE5 		ldr	r0, .L5
 2072 00e0 FEFFFFEB 		bl	DelayMs
  62:../src/button.c **** 	/*Atendemos interrupciones*/
  63:../src/button.c **** 	//Borramos EXTINTPND ambas líneas EINT7 y EINT6
  64:../src/button.c **** 	rEXTINTPND = 0xFF;
 2073              		.loc 1 64 0
 2074 00e4 24309FE5 		ldr	r3, .L5+4
 2075 00e8 FF20A0E3 		mov	r2, #255
 2076 00ec 002083E5 		str	r2, [r3, #0]
  65:../src/button.c **** 	//Borramos INTPND usando ISPC
  66:../src/button.c **** 	rI_ISPC =  0x3FFFFFF;
 2077              		.loc 1 66 0
 2078 00f0 1C309FE5 		ldr	r3, .L5+8
 2079 00f4 3F23E0E3 		mvn	r2, #-67108864
 2080 00f8 002083E5 		str	r2, [r3, #0]
  67:../src/button.c **** }
 2081              		.loc 1 67 0
 2082 00fc 1CD04BE2 		sub	sp, fp, #28
 2083 0100 0F689DE8 		ldmfd	sp, {r0, r1, r2, r3, fp, sp, lr}
 2084 0104 04C09DE4 		ldmfd	sp!, {ip}
 2085 0108 04F05EE2 		subs	pc, lr, #4
 2086              	.L6:
 2087              		.align	2
 2088              	.L5:
 2089 010c 88130000 		.word	5000
 2090 0110 5400D201 		.word	30539860
 2091 0114 2400E001 		.word	31457316
 2092              		.cfi_endproc
 2093              	.LFE1:
 2095              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 button.c
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:1955   .bss:00000000 symbol
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:1952   .bss:00000000 $d
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:1958   .text:00000000 $a
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:1961   .text:00000000 Eint4567_init
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:2031   .text:000000a4 $d
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:2046   .text:000000c8 Eint4567_ISR
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:2043   .text:000000c8 $a
C:\Users\USUARI~1\AppData\Local\Temp\cce8OEIb.s:2089   .text:0000010c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
leds_switch
DelayMs
